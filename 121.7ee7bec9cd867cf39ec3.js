"use strict";(self.webpackChunkMy_planning=self.webpackChunkMy_planning||[]).push([[121],{9121:(j,h,r)=>{r.r(h),r.d(h,{DashboardModule:()=>N});var i=r(8583),b=r(2484),m=r(1841),g=r(8002),y=r(2340),S=r(3442);class C{constructor(o){var n;this.id=0,this.type=null,this.recap=!1,this.size=null,this.users=null,o?(Object.assign(this,o),(null===(n=null==o?void 0:o.users)||void 0===n?void 0:n.length)&&(this.users=o.users.map(a=>new S.n(a)))):Object.create(this)}}var Z=r(1149),c=r(6738),t=r(7716),A=r(3822);let p=(()=>{class e{constructor(n,a){this._http=n,this._authService=a,this._baseUrl=(0,y.U)()+"/card"}getCards(){return this._http.get(`${this._baseUrl}`).pipe((0,g.U)(n=>n.map(a=>new C(a))))}getUserCards(){return this._http.get(`${this._baseUrl}/user/${this._authService.user.id.toString(10)}`).pipe((0,g.U)(n=>n.map(a=>new C(a))))}getRecapIncoming(n){const a=(new m.LE).set("userId",this._authService.user.id.toString(10)).set("type",n).set("start",c().toISOString(!1)).set("end",c().endOf("day").toISOString(!1));return this._getEventsIncoming(a)}getNormalIncoming(n){const a=(new m.LE).set("userId",this._authService.user.id.toString(10)).set("type",n).set("start",c().startOf("day").toISOString(!1)).set("end",c().endOf("day").toISOString(!1));return this._getEventsIncoming(a)}_getEventsIncoming(n){return this._http.get(`${this._baseUrl}/incoming`,{params:n}).pipe((0,g.U)(a=>a.map(f=>new Z.j(f))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(m.eN),t.LFG(A.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var u=r(4655),O=r(4568),v=r(6215),M=r(5917),P=r(8307),_=r(5304),s=r(2922),d=r(5618),l=r(9790);let D=(()=>{class e{constructor(n){this._cardService=n,this.contentLoading$=new v.X(!0)}ngOnInit(){this.content$=this._cardService.getRecapIncoming(this.card.type).pipe((0,g.U)(n=>n.length)).pipe((0,P.b)(()=>this.contentLoading$.next(!1)),(0,_.K)(n=>(this.contentLoading$.next(!1),(0,M.of)(null))))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-recap-card"]],inputs:{card:"card"},decls:9,vars:14,consts:[["fxLayout","row","fxLayoutAlign","space-between center",1,"card",3,"nbSpinner","nbSpinnerStatus"],[1,"title"],[1,"content"]],template:function(n,a){1&n&&(t.TgZ(0,"nb-card",0),t.ALo(1,"async"),t.ALo(2,"async"),t.TgZ(3,"p",1),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"span",2),t._uU(7),t.ALo(8,"async"),t.qZA(),t.qZA()),2&n&&(t.ekj("success",0===t.lcZ(1,6,a.content$)),t.Q6J("nbSpinner",t.lcZ(2,8,a.contentLoading$))("nbSpinnerStatus","info"),t.xp6(4),t.Oqu(t.lcZ(5,10,"APP.DASHBOARD.RECAP."+a.card.type)),t.xp6(3),t.Oqu(t.lcZ(8,12,a.content$)))},directives:[s.Asz,d.xw,d.Wh,s.Q7R],pipes:[i.Ov,l.X$],styles:['@import"https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&family=Manrope:wght@200;300;400;500;600;700;800&family=Train+One&display=swap";@import"https://fonts.googleapis.com/css2?family=Zilla+Slab+Highlight:wght@700&display=swap";.font.--caveat[_ngcontent-%COMP%]{font-family:"Caveat",cursive!important}.font.--man-rope[_ngcontent-%COMP%]{font-family:"Manrope",sans-serif!important}.font.--train-one[_ngcontent-%COMP%]{font-family:"Train One",cursive!important}.font.--zilla-slab[_ngcontent-%COMP%]{font-family:"Zilla Slab Highlight",cursive}.font.--kg-happy[_ngcontent-%COMP%]{font-family:kg-happy,serif}.text-center[_ngcontent-%COMP%]{text-align:center!important}.text-left[_ngcontent-%COMP%]{text-align:left!important}.text-right[_ngcontent-%COMP%]{text-align:right!important}.float-left[_ngcontent-%COMP%]{float:left}.float-right[_ngcontent-%COMP%]{float:right}.full-width[_ngcontent-%COMP%], [_nghost-%COMP%]     .card{width:100%!important}.margin[_ngcontent-%COMP%]{margin:1rem!important}.margin-xs[_ngcontent-%COMP%]{margin:.5rem!important}.margin-xl[_ngcontent-%COMP%]{margin:2rem!important}.margin-side[_ngcontent-%COMP%]{margin-left:1rem!important;margin-right:1rem!important}.margin-side-xs[_ngcontent-%COMP%]{margin-left:.5rem!important;margin-right:.5rem!important}.margin-side-xl[_ngcontent-%COMP%]{margin-left:2rem!important;margin-right:2rem!important}.margin-vertical[_ngcontent-%COMP%]{margin-top:1rem!important;margin-bottom:1rem!important}.margin-vertical-xs[_ngcontent-%COMP%]{margin-top:.5rem!important;margin-bottom:.5rem!important}.margin-vertical-xl[_ngcontent-%COMP%]{margin-top:2rem!important;margin-bottom:2rem!important}.margin-left[_ngcontent-%COMP%]{margin-left:1rem!important}.margin-left-xs[_ngcontent-%COMP%]{margin-left:.5rem!important}.margin-left-xl[_ngcontent-%COMP%]{margin-left:2rem!important}.margin-right[_ngcontent-%COMP%]{margin-right:1rem!important}.margin-right-xs[_ngcontent-%COMP%]{margin-right:.5rem!important}.margin-right-xl[_ngcontent-%COMP%]{margin-right:2rem!important}.margin-top[_ngcontent-%COMP%]{margin-top:1rem!important}.margin-top-xs[_ngcontent-%COMP%]{margin-top:.5rem!important}.margin-top-xl[_ngcontent-%COMP%]{margin-top:2rem!important}.margin-bottom[_ngcontent-%COMP%]{margin-bottom:1rem!important}.margin-bottom-xs[_ngcontent-%COMP%]{margin-bottom:.5rem!important}.margin-bottom-xl[_ngcontent-%COMP%]{margin-bottom:2rem!important}.no-margin[_ngcontent-%COMP%]{margin:0!important}.padding[_ngcontent-%COMP%]{padding:1rem!important}.padding-xs[_ngcontent-%COMP%]{padding:.5rem!important}.padding-xl[_ngcontent-%COMP%]{padding:2rem!important}.padding-side[_ngcontent-%COMP%]{padding-left:1rem!important;padding-right:1rem!important}.padding-side-xs[_ngcontent-%COMP%]{padding-left:.5rem!important;padding-right:.5rem!important}.padding-side-xl[_ngcontent-%COMP%]{padding-left:2rem!important;padding-right:2rem!important}.padding-left[_ngcontent-%COMP%]{padding-left:1rem!important}.padding-left-xs[_ngcontent-%COMP%]{padding-left:.5rem!important}.padding-left-xl[_ngcontent-%COMP%]{padding-left:2rem!important}.padding-right[_ngcontent-%COMP%]{padding-right:1rem!important}.padding-right-xs[_ngcontent-%COMP%]{padding-right:.5rem!important}.padding-right-xl[_ngcontent-%COMP%]{padding-right:2rem!important}.padding-top[_ngcontent-%COMP%]{padding-top:1rem!important}.padding-top-xs[_ngcontent-%COMP%]{padding-top:.5rem!important}.padding-top-xl[_ngcontent-%COMP%]{padding-top:2rem!important}.padding-bottom[_ngcontent-%COMP%]{padding-bottom:1rem!important}.padding-bottom-xs[_ngcontent-%COMP%]{padding-bottom:.5rem!important}.padding-bottom-xl[_ngcontent-%COMP%]{padding-bottom:2rem!important}.no-padding[_ngcontent-%COMP%]{padding:0!important}.rotate-90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}.rotate-270[_ngcontent-%COMP%]{transform:rotate(-90deg)}.rotate-animation[_ngcontent-%COMP%]{transition:transform 175ms cubic-bezier(0,0,.2,1)}.not-selectable[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.spinning[_ngcontent-%COMP%]{animation-name:rotate;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.clickable[_ngcontent-%COMP%]{cursor:pointer}.clickable[_ngcontent-%COMP%]:hover.clickable--underline{text-decoration:underline}.loading-background[_ngcontent-%COMP%]{animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:placeHolderShimmer;animation-timing-function:linear;background:#f6f7f8;background:linear-gradient(to right,#eeeeee 100px,#dddddd 250px,#eeeeee 400px);background-position:0 0;background-size:500px 100px;position:relative}@keyframes placeHolderShimmer{0%{background-position-x:0}to{background-position-x:500px}}.contrast-bg[_ngcontent-%COMP%]{background:rgba(0,0,0,.2)!important}.ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:inherit}[_nghost-%COMP%]     .card{padding:12px 30px;border-radius:25px;height:auto;color:#252547}[_nghost-%COMP%]     .card.success{background:#B3E814}[_nghost-%COMP%]     .card:not(.success){background:#3366FF}[_nghost-%COMP%]     .card .title{color:inherit;font-size:1.5em}[_nghost-%COMP%]     .card .content{font-family:"Dancing Script",cursive!important;font-size:3.5em;color:inherit}']}),e})();var I=r(9765),T=r(6655);function $(e,o){if(1&e&&(t.TgZ(0,"nb-list-item"),t.TgZ(1,"span",3),t._UZ(2,"app-date-label",4),t._uU(3),t.qZA(),t.qZA()),2&e){const n=o.$implicit,a=t.oxw(2);t.xp6(1),t.ekj("in-progress",a.isInProgress(n)),t.xp6(1),t.Q6J("startDate",n.startDate)("endDate",n.endDate),t.xp6(1),t.hij(" ",n.name," ")}}function L(e,o){if(1&e&&(t.TgZ(0,"nb-list"),t.YNc(1,$,4,5,"nb-list-item",2),t.ALo(2,"async"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.content$))}}function w(e,o){1&e&&(t.TgZ(0,"div",5),t.TgZ(1,"i"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"GLOBAL.EMPTY")))}let U=(()=>{class e{constructor(n){this._cardService=n,this.contentLoading$=new v.X(!0),this._destroy$=new I.xQ}ngOnInit(){this._initContent()}ngOnDestroy(){this._destroy$.next()}isInProgress(n){return c(n.startDate).isBefore(new Date)}_initContent(){this.content$=this._cardService.getNormalIncoming(this.type).pipe((0,P.b)(()=>this.contentLoading$.next(!1)),(0,_.K)(n=>(this.contentLoading$.next(!1),(0,M.of)([]))))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-event-card-content"]],inputs:{type:"type"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["noEvents",""],[4,"ngFor","ngForOf"],[1,"ellipsis"],[3,"startDate","endDate"],["fxLayoutAlign","center center"]],template:function(n,a){if(1&n&&(t.YNc(0,L,3,3,"nb-list",0),t.ALo(1,"async"),t.YNc(2,w,4,3,"ng-template",null,1,t.W1O)),2&n){const f=t.MAs(3);let x;t.Q6J("ngIf",null==(x=t.lcZ(1,2,a.content$))?null:x.length)("ngIfElse",f)}},directives:[i.O5,s.zP_,i.sg,s.qBV,T.Q,d.Wh],pipes:[i.Ov,l.X$],styles:["[_nghost-%COMP%]     nb-list nb-list-item:hover{cursor:pointer;font-weight:600}[_nghost-%COMP%]     nb-list nb-list-item span.in-progress{color:#ff3835;font-weight:bold}"]}),e})(),z=(()=>{class e{constructor(){}ngOnInit(){}get cardSize(){return this.card.size.toLowerCase()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-card"]],inputs:{card:"card"},decls:6,vars:5,consts:[["status","info",3,"size"],[3,"type"]],template:function(n,a){1&n&&(t.TgZ(0,"nb-card",0),t.TgZ(1,"nb-card-header"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"nb-card-body"),t._UZ(5,"app-event-card-content",1),t.qZA(),t.qZA()),2&n&&(t.Q6J("size",a.cardSize),t.xp6(2),t.Oqu(t.lcZ(3,3,"APP.DASHBOARD.CARD."+a.card.type)),t.xp6(3),t.Q6J("type",a.card.type))},directives:[s.Asz,s.ndF,s.yKW,U],pipes:[l.X$],styles:[""]}),e})();function E(e,o){1&e&&t._UZ(0,"app-recap-card",5),2&e&&t.Q6J("card",o.$implicit)}function F(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",3),t.YNc(2,E,1,1,"app-recap-card",4),t.qZA(),t.BQk()),2&e){const n=o.ngIf;t.xp6(2),t.Q6J("ngForOf",n)}}function Q(e,o){1&e&&t._UZ(0,"app-card",5),2&e&&t.Q6J("card",o.$implicit)}function R(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"div",6),t.YNc(2,Q,1,1,"app-card",4),t.qZA(),t.BQk()),2&e){const n=o.ngIf;t.xp6(2),t.Q6J("ngForOf",n)}}function J(e,o){if(1&e&&(t.TgZ(0,"div",1),t.YNc(1,F,3,1,"ng-container",2),t.YNc(2,R,3,1,"ng-container",2),t.qZA()),2&e){const n=o.ngIf,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.getRecapCards(n)),t.xp6(1),t.Q6J("ngIf",a.getGiantCards(n))}}const Y=[{path:"",component:(()=>{class e{constructor(n){this._cardService=n}ngOnInit(){this.cards$=this._cardService.getUserCards()}getRecapCards(n){return n.filter(a=>a.recap)}getGiantCards(n){return n.filter(a=>!a.recap&&"giant"===a.size)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-dashboard"]],decls:2,vars:3,consts:[["class","dashboard-container",4,"ngIf"],[1,"dashboard-container"],[4,"ngIf"],["gdColumns","repeat(auto-fill, minmax(550px, 1fr))","gdColumns.lt-sm","1fr","gdGap","12px",1,"recap-card-container",2,"margin-bottom","12px"],[3,"card",4,"ngFor","ngForOf"],[3,"card"],["gdColumns","repeat(auto-fill, minmax(550px, 1fr))","gdColumns.lt-sm","1fr","gdGap","12px",1,"normal-card-container"]],template:function(n,a){1&n&&(t.YNc(0,J,3,2,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,a.cards$))},directives:[i.O5,O.OY,O.O7,i.sg,D,z],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]   .dashboard-container[_ngcontent-%COMP%]{height:calc(100vh - 126px)}[_nghost-%COMP%]   .dashboard-container[_ngcontent-%COMP%]   .recap-card-container[_ngcontent-%COMP%], [_nghost-%COMP%]   .dashboard-container[_ngcontent-%COMP%]   .normal-card-container[_ngcontent-%COMP%]{padding:0 12px}"]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(Y)],u.Bz]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[p],imports:[[i.ez,B,b.m]]}),e})()}}]);